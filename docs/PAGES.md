# 페이지별 기능 명세서

## 📖 개요

본 문서는 게시판 공통 라이브러리의 기능을 4개의 페이지로 분류하고, 각 페이지별 상세 기능과 테스트 항목을 정의합니다.

---

## 🗂️ 페이지 구성

| 페이지 | 주요 기능 | 우선순위 |
|-------|----------|---------|
| **페이지 1** | 게시물 관리 (CRUD, 조회수, 상단고정) | P0 (필수) |
| **페이지 2** | 댓글/대댓글 및 좋아요/북마크 | P0 (필수) |
| **페이지 3** | 파일 첨부 및 검색 | P0 (필수) |
| **페이지 4** | 관리자 기능 및 Q&A 게시판 | P1 (중요) |

---

## 📄 페이지 1: 게시물 관리

### 1.1 기능 개요

게시물의 기본적인 생성, 조회, 수정, 삭제 기능과 부가 기능을 제공합니다.

### 1.2 상세 기능

| 기능 ID | 기능명 | 설명 | 상태 |
|--------|-------|------|------|
| P1-001 | 게시물 작성 | 제목, 본문, 카테고리, 태그를 포함한 새 게시물 생성 | 🟢 완료 |
| P1-002 | 게시물 조회 | 게시물 ID로 단일 게시물 상세 정보 조회 | 🟢 완료 |
| P1-003 | 게시물 수정 | 기존 게시물의 제목, 본문 등 수정 | 🟢 완료 |
| P1-004 | 게시물 삭제 | 게시물 삭제 (소프트 삭제 지원) | 🟢 완료 |
| P1-005 | 게시물 목록 조회 | 페이징, 정렬, 필터링이 적용된 목록 조회 | 🟢 완료 |
| P1-006 | 조회수 관리 | 게시물 조회 시 조회수 자동 증가, 중복 방지 | 🟢 완료 |
| P1-007 | 상단고정 설정 | 특정 게시물을 목록 상단에 고정 | 🟢 완료 |
| P1-008 | 상단고정 해제 | 상단 고정된 게시물의 고정 해제 | 🟢 완료 |
| P1-009 | 임시저장 | 작성 중인 게시물 임시 저장 | 🟢 완료 |
| P1-010 | 임시저장 목록 | 임시 저장된 게시물 목록 조회 | 🟢 완료 |

### 1.3 API 엔드포인트

| 메서드 | 엔드포인트 | 설명 |
|-------|-----------|------|
| POST | `/api/posts` | 게시물 작성 |
| GET | `/api/posts/{id}` | 게시물 상세 조회 |
| PUT | `/api/posts/{id}` | 게시물 수정 |
| DELETE | `/api/posts/{id}` | 게시물 삭제 |
| GET | `/api/posts` | 게시물 목록 조회 |
| POST | `/api/posts/{id}/pin` | 상단고정 설정 |
| DELETE | `/api/posts/{id}/pin` | 상단고정 해제 |
| POST | `/api/posts/draft` | 임시저장 |
| GET | `/api/posts/draft` | 임시저장 목록 |

### 1.4 테스트 케이스

| 테스트 ID | 테스트명 | 테스트 내용 | 예상 결과 |
|----------|---------|------------|----------|
| T1-001 | 게시물 작성 성공 | 유효한 데이터로 게시물 작성 | 201 Created, 게시물 ID 반환 |
| T1-002 | 게시물 작성 실패 - 제목 없음 | 제목 없이 게시물 작성 시도 | 400 Bad Request |
| T1-003 | 게시물 조회 성공 | 존재하는 게시물 ID로 조회 | 200 OK, 게시물 상세 정보 |
| T1-004 | 게시물 조회 실패 - 미존재 | 존재하지 않는 ID로 조회 | 404 Not Found |
| T1-005 | 게시물 수정 성공 | 권한 있는 사용자가 게시물 수정 | 200 OK, 수정된 정보 |
| T1-006 | 게시물 수정 실패 - 권한 없음 | 작성자가 아닌 사용자가 수정 시도 | 403 Forbidden |
| T1-007 | 게시물 삭제 성공 | 권한 있는 사용자가 게시물 삭제 | 204 No Content |
| T1-008 | 목록 조회 - 페이징 | 페이지네이션 파라미터로 조회 | 200 OK, 지정된 페이지 데이터 |
| T1-009 | 목록 조회 - 정렬 | 정렬 조건으로 조회 | 200 OK, 정렬된 데이터 |
| T1-010 | 조회수 증가 확인 | 게시물 조회 시 조회수 1 증가 | 조회수 값 증가 확인 |
| T1-011 | 조회수 중복 방지 | 같은 사용자가 재조회 | 조회수 미증가 |
| T1-012 | 상단고정 설정 | 관리자가 상단고정 설정 | 200 OK, isPinned = true |
| T1-013 | 상단고정 해제 | 관리자가 상단고정 해제 | 200 OK, isPinned = false |
| T1-014 | 임시저장 성공 | 게시물 임시저장 | 200 OK, draft ID 반환 |
| T1-015 | 임시저장 목록 | 임시저장 목록 조회 | 200 OK, draft 목록 |

### 1.5 완료 조건

- [x] 모든 API 엔드포인트 구현 완료 ✅
- [x] 모든 테스트 케이스 통과 (15개) ✅
- [x] 조회수 중복 방지 로직 구현 ✅
- [x] 소프트 삭제 구현 ✅
- [x] 권한 검증 로직 구현 ✅

---

## 📄 페이지 2: 댓글/대댓글 및 좋아요/북마크

### 2.1 기능 개요

게시물에 대한 댓글, 대댓글 기능과 사용자 활동(좋아요, 북마크) 기능을 제공합니다.

### 2.2 상세 기능

| 기능 ID | 기능명 | 설명 | 상태 |
|--------|-------|------|------|
| P2-001 | 댓글 작성 | 게시물에 댓글 작성 | 🟢 완료 |
| P2-002 | 댓글 조회 | 게시물의 댓글 목록 조회 | 🟢 완료 |
| P2-003 | 댓글 수정 | 본인 댓글 수정 | 🟢 완료 |
| P2-004 | 댓글 삭제 | 본인 댓글 삭제 | 🟢 완료 |
| P2-005 | 대댓글 작성 | 댓글에 대한 답글 작성 | 🟢 완료 |
| P2-006 | 대댓글 조회 | 특정 댓글의 대댓글 목록 조회 | 🟢 완료 |
| P2-007 | 게시물 좋아요 | 게시물에 좋아요 추가 | 🟢 완료 |
| P2-008 | 게시물 좋아요 취소 | 게시물 좋아요 취소 | 🟢 완료 |
| P2-009 | 댓글 좋아요 | 댓글에 좋아요 추가 | 🟢 완료 |
| P2-010 | 북마크 추가 | 게시물 북마크 | 🟢 완료 |
| P2-011 | 북마크 해제 | 게시물 북마크 해제 | 🟢 완료 |
| P2-012 | 북마크 목록 | 사용자의 북마크 목록 조회 | 🟢 완료 |

### 2.3 API 엔드포인트

| 메서드 | 엔드포인트 | 설명 |
|-------|-----------|------|
| POST | `/api/posts/{postId}/comments` | 댓글 작성 |
| GET | `/api/posts/{postId}/comments` | 댓글 목록 조회 |
| PUT | `/api/comments/{id}` | 댓글 수정 |
| DELETE | `/api/comments/{id}` | 댓글 삭제 |
| POST | `/api/comments/{id}/replies` | 대댓글 작성 |
| POST | `/api/posts/{id}/like` | 게시물 좋아요 |
| DELETE | `/api/posts/{id}/like` | 게시물 좋아요 취소 |
| POST | `/api/comments/{id}/like` | 댓글 좋아요 |
| POST | `/api/posts/{id}/bookmark` | 북마크 추가 |
| DELETE | `/api/posts/{id}/bookmark` | 북마크 해제 |
| GET | `/api/users/me/bookmarks` | 내 북마크 목록 |

### 2.4 테스트 케이스

| 테스트 ID | 테스트명 | 테스트 내용 | 예상 결과 |
|----------|---------|------------|----------|
| T2-001 | 댓글 작성 성공 | 유효한 데이터로 댓글 작성 | 201 Created |
| T2-002 | 댓글 작성 실패 - 미인증 | 비로그인 상태로 댓글 작성 | 401 Unauthorized |
| T2-003 | 댓글 목록 조회 | 게시물의 댓글 목록 조회 | 200 OK, 댓글 목록 |
| T2-004 | 댓글 수정 성공 | 작성자가 댓글 수정 | 200 OK |
| T2-005 | 댓글 수정 실패 - 권한 없음 | 타인의 댓글 수정 시도 | 403 Forbidden |
| T2-006 | 댓글 삭제 성공 | 작성자가 댓글 삭제 | 204 No Content |
| T2-007 | 대댓글 작성 성공 | 댓글에 대댓글 작성 | 201 Created |
| T2-008 | 대댓글 계층 조회 | 댓글과 대댓글 계층 구조 조회 | 계층 구조 확인 |
| T2-009 | 좋아요 토글 - 추가 | 좋아요 추가 | likeCount 증가 |
| T2-010 | 좋아요 토글 - 취소 | 좋아요 취소 | likeCount 감소 |
| T2-011 | 좋아요 중복 방지 | 같은 게시물에 중복 좋아요 | 409 Conflict |
| T2-012 | 북마크 추가 | 게시물 북마크 | 200 OK |
| T2-013 | 북마크 해제 | 북마크 해제 | 200 OK |
| T2-014 | 북마크 목록 조회 | 내 북마크 목록 | 200 OK, 북마크 목록 |
| T2-015 | 댓글 수 동기화 | 댓글 작성/삭제 시 게시물 댓글 수 갱신 | commentCount 정확히 반영 |

### 2.5 완료 조건

- [x] 모든 API 엔드포인트 구현 완료 ✅
- [x] 모든 테스트 케이스 통과 (66개 - 15개 요구사항 초과 달성) ✅
- [x] 대댓글 계층 구조 지원 (최대 2단계) ✅
- [x] 좋아요/북마크 중복 방지 로직 ✅
- [x] 게시물 통계 자동 업데이트 (댓글 수, 좋아요 수) ✅

---

## 📄 페이지 3: 파일 첨부 및 검색

### 3.1 기능 개요

게시물에 파일을 첨부하고 관리하는 기능과 게시물 검색 기능을 제공합니다.

### 3.2 상세 기능

| 기능 ID | 기능명 | 설명 | 상태 |
|--------|-------|------|------|
| P3-001 | 파일 업로드 | 단일/다중 파일 업로드 | 🟢 완료 |
| P3-002 | 이미지 업로드 | 이미지 파일 업로드 및 미리보기 | 🟢 완료 |
| P3-003 | 썸네일 생성 | 이미지 업로드 시 자동 썸네일 생성 | 🟢 완료 |
| P3-004 | 파일 다운로드 | 첨부 파일 다운로드 | 🟢 완료 |
| P3-005 | 파일 삭제 | 첨부 파일 삭제 | 🟢 완료 |
| P3-006 | 업로드 제한 | 파일 크기, 확장자, 개수 제한 | 🟢 완료 |
| P3-007 | 기본 검색 | 제목, 본문 키워드 검색 | 🟢 완료 |
| P3-008 | 태그 검색 | 태그 기반 검색 | 🟢 완료 |
| P3-009 | 작성자 검색 | 작성자명 기반 검색 | 🟢 완료 |
| P3-010 | 복합 검색 | 여러 조건 조합 검색 | 🟢 완료 |

### 3.3 API 엔드포인트

| 메서드 | 엔드포인트 | 설명 |
|-------|-----------|------|
| POST | `/api/files/upload` | 파일 업로드 |
| POST | `/api/files/upload-multiple` | 다중 파일 업로드 |
| GET | `/api/files/{id}` | 파일 정보 조회 |
| GET | `/api/files/{id}/download` | 파일 다운로드 |
| DELETE | `/api/files/{id}` | 파일 삭제 |
| GET | `/api/files/{id}/thumbnail` | 썸네일 조회 |
| GET | `/api/posts/{postId}/files` | 게시물 첨부파일 목록 |
| GET | `/api/search?q={query}` | 통합 검색 |
| GET | `/api/search/posts?q={query}` | 게시물 검색 |
| GET | `/api/search/tags?q={query}` | 태그 검색 |
| GET | `/api/search/authors?q={query}` | 작성자 검색 |
| GET | `/api/search/suggestions?q={query}` | 검색어 자동완성 |

### 3.4 테스트 케이스

| 테스트 ID | 테스트명 | 테스트 내용 | 예상 결과 |
|----------|---------|------------|----------|
| T3-001 | 파일 업로드 성공 | 허용된 파일 업로드 | 201 Created, 파일 ID |
| T3-002 | 파일 업로드 실패 - 크기 초과 | 최대 크기 초과 파일 | 413 Payload Too Large |
| T3-003 | 파일 업로드 실패 - 확장자 불허 | 허용되지 않은 확장자 | 415 Unsupported Media Type |
| T3-004 | 다중 파일 업로드 | 여러 파일 동시 업로드 | 201 Created, 파일 ID 배열 |
| T3-005 | 파일 다운로드 성공 | 존재하는 파일 다운로드 | 200 OK, 파일 데이터 |
| T3-006 | 파일 다운로드 실패 - 미존재 | 존재하지 않는 파일 | 404 Not Found |
| T3-007 | 파일 삭제 성공 | 권한 있는 사용자가 삭제 | 204 No Content |
| T3-008 | 썸네일 조회 | 이미지 파일의 썸네일 | 200 OK, 썸네일 이미지 |
| T3-009 | 제목 검색 | 제목에서 키워드 검색 | 200 OK, 검색 결과 |
| T3-010 | 본문 검색 | 본문에서 키워드 검색 | 200 OK, 검색 결과 |
| T3-011 | 태그 검색 | 태그로 검색 | 200 OK, 검색 결과 |
| T3-012 | 복합 조건 검색 | 제목 + 카테고리 조합 | 200 OK, 필터링된 결과 |
| T3-013 | 검색 결과 페이징 | 검색 결과 페이지네이션 | 200 OK, 페이징 적용 |
| T3-014 | 검색 결과 하이라이팅 | 검색어 강조 표시 | 검색어 하이라이트 확인 |
| T3-015 | 빈 검색 결과 | 결과 없는 검색 | 200 OK, 빈 배열 |

### 3.5 완료 조건

- [x] 모든 API 엔드포인트 구현 완료 ✅
- [x] 모든 테스트 케이스 통과 (92개 - FileService 30+, FileValidation 20+, Search 31+, 기타) ✅
- [x] 파일 검증 로직 구현 (크기, 확장자, 시그니처) ✅
- [x] 썸네일 자동 생성 구현 ✅
- [x] 전문 검색 지원 (SQL LIKE 기반 검색) ✅

---

## 📄 페이지 4: 관리자 기능 및 Q&A 게시판

### 4.1 기능 개요


관리자용 콘텐츠 관리 기능과 Q&A 게시판(질문/답변) 기능을 제공합니다.

### 4.2 상세 기능

| 기능 ID | 기능명 | 설명 | 상태 |
|--------|-------|------|------|
| P4-001 | 전체 게시물 관리 | 관리자용 전체 게시물 조회/관리 | 🟢 완료 |
| P4-002 | 전체 댓글 관리 | 관리자용 전체 댓글 조회/관리 | 🟢 완료 |
| P4-003 | 신고 목록 조회 | 신고된 콘텐츠 목록 조회 | 🟢 완료 |
| P4-004 | 신고 처리 | 신고 승인/거부 처리 | 🟢 완료 |
| P4-005 | 콘텐츠 블라인드 | 부적절한 콘텐츠 숨김 처리 | 🟢 완료 |
| P4-006 | 일괄 삭제 | 선택된 게시물/댓글 일괄 삭제 | 🟢 완료 |
| P4-007 | 통계 조회 | 게시판 통계 데이터 조회 | 🟢 완료 |
| P4-008 | 질문 작성 | Q&A 질문 작성 | 🟢 완료 |
| P4-009 | 질문 조회 | Q&A 질문 상세/목록 조회 | 🟢 완료 |
| P4-010 | 답변 작성 | Q&A 답변 작성 | 🟢 완료 |
| P4-011 | 답변 채택 | 질문자가 답변 채택 | 🟢 완료 |
| P4-012 | 답변 추천 | 답변 추천/비추천 | 🟢 완료 |

### 4.3 API 엔드포인트

| 메서드 | 엔드포인트 | 설명 |
|-------|-----------|------|
| GET | `/api/admin/posts` | 전체 게시물 관리 조회 |
| GET | `/api/admin/comments` | 전체 댓글 관리 조회 |
| GET | `/api/admin/reports` | 신고 목록 |
| PUT | `/api/admin/reports/{id}` | 신고 처리 |
| POST | `/api/admin/batch/delete` | 일괄 삭제 |
| GET | `/api/admin/statistics` | 통계 조회 |
| GET | `/api/questions` | 질문 목록 |
| GET | `/api/questions/{id}` | 질문 상세 |
| POST | `/api/questions` | 질문 작성 |
| PUT | `/api/questions/{id}` | 질문 수정 |
| DELETE | `/api/questions/{id}` | 질문 삭제 |
| GET | `/api/questions/{id}/answers` | 답변 목록 |
| POST | `/api/questions/{id}/answers` | 답변 작성 |
| PUT | `/api/answers/{id}` | 답변 수정 |
| DELETE | `/api/answers/{id}` | 답변 삭제 |
| POST | `/api/answers/{id}/accept` | 답변 채택 |
| POST | `/api/answers/{id}/vote` | 답변 추천 |

### 4.4 테스트 케이스

| 테스트 ID | 테스트명 | 테스트 내용 | 예상 결과 |
|----------|---------|------------|----------|
| T4-001 | 관리자 게시물 조회 | 관리자가 전체 게시물 조회 | 200 OK, 전체 목록 |
| T4-002 | 관리자 권한 검증 | 일반 사용자가 관리자 API 접근 | 403 Forbidden |
| T4-003 | 신고 목록 조회 | 관리자가 신고 목록 조회 | 200 OK, 신고 목록 |
| T4-004 | 신고 승인 처리 | 신고 승인 및 콘텐츠 처리 | 200 OK, 상태 변경 |
| T4-005 | 신고 거부 처리 | 신고 거부 | 200 OK, 상태 변경 |
| T4-006 | 콘텐츠 블라인드 | 게시물/댓글 블라인드 처리 | 200 OK, isBlinded = true |
| T4-007 | 일괄 삭제 | 여러 게시물 일괄 삭제 | 200 OK, 삭제 수 반환 |
| T4-008 | 통계 조회 | 게시판 통계 데이터 | 200 OK, 통계 데이터 |
| T4-009 | 질문 작성 성공 | Q&A 질문 작성 | 201 Created |
| T4-010 | 질문 목록 조회 | Q&A 질문 목록 | 200 OK, 질문 목록 |
| T4-011 | 답변 작성 성공 | 질문에 답변 작성 | 201 Created |
| T4-012 | 답변 채택 성공 | 질문자가 답변 채택 | 200 OK, isAccepted = true |
| T4-013 | 답변 채택 - 권한 없음 | 질문자 아닌 사용자가 채택 시도 | 403 Forbidden |
| T4-014 | 답변 추천 | 답변 추천 | voteCount 증가 |
| T4-015 | 질문 상태 변경 | 답변 채택 시 질문 상태 자동 변경 | status = Answered |

### 4.5 완료 조건

- [x] 모든 API 엔드포인트 구현 완료 ✅
- [x] 모든 테스트 케이스 통과 (103개) ✅
- [x] 관리자 권한 검증 로직 ✅
- [x] 신고 처리 로직 ✅
- [x] Q&A 답변 채택 로직 ✅
- [x] 통계 집계 기능 ✅

---

## 📊 전체 진행 현황

| 페이지 | 기능 수 | 테스트 수 | 완료율 |
|-------|--------|----------|-------|
| 페이지 1 | 10개 | 88개 | 100% ✅ |
| 페이지 2 | 12개 | 66개 | 100% ✅ |
| 페이지 3 | 10개 | 123개 | 100% ✅ |
| 페이지 4 | 12개 | 103개 | 100% ✅ |
| **합계** | **44개** | **380개** | **100%** |

## 📝 상태 범례

- 🔴 대기: 개발 대기 중
- 🟡 진행중: 개발 진행 중
- 🟢 완료: 개발 및 테스트 완료
- 🔵 테스트중: 개발 완료, 테스트 진행 중

---

*최종 업데이트: 2025-12-19*
